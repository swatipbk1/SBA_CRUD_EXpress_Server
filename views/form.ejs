<!-- latestAlbums.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latest Albums</title>
</head>
<body>
    <h1>Latest Albums</h1>

    <!-- Form for adding a new album -->
    <form id="addAlbumForm">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>
        
        <label for="artist">Artist:</label>
        <input type="text" id="artist" name="artist" required>
        
        <label for="releaseYear">Release Year:</label>
        <input type="number" id="releaseYear" name="releaseYear" required>
        
        <label for="genre">Genre:</label>
        <input type="text" id="genre" name="genre" required>
        
        <button type="submit">Add Album</button>
    </form>

    <!-- JavaScript for handling form submission -->
    <script>
        document.getElementById('addAlbumForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission
            
            // Collect form data
            const formData = new FormData(this);

            // Make a POST request to the API endpoint to add the new album
            fetch('/api/albums', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Handle response (e.g., display success message, update UI)
                console.log('New album added:', data);
                alert('New album added successfully!');
            })
            .catch(error => {
                // Handle error (e.g., display error message)
                console.error('Error adding album:', error);
                alert('Error adding album. Please try again.');
            });
        });
    </script>
</body>
</html>
